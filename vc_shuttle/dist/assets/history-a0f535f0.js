import{_ as J}from"./@babel-47f85c78.js";import{r as dn}from"./resolve-pathname-e210f2ac.js";import{i as on}from"./tiny-invariant-dd7d57d2.js";function z(n){return n.charAt(0)==="/"?n:"/"+n}function Z(n){return n.charAt(0)==="/"?n.substr(1):n}function ln(n,e){return n.toLowerCase().indexOf(e.toLowerCase())===0&&"/?#".indexOf(n.charAt(e.length))!==-1}function sn(n,e){return ln(n,e)?n.substr(e.length):n}function cn(n){return n.charAt(n.length-1)==="/"?n.slice(0,-1):n}function vn(n){var e=n||"/",f="",c="",a=e.indexOf("#");a!==-1&&(c=e.substr(a),e=e.substr(0,a));var p=e.indexOf("?");return p!==-1&&(f=e.substr(p),e=e.substr(0,p)),{pathname:e,search:f==="?"?"":f,hash:c==="#"?"":c}}function M(n){var e=n.pathname,f=n.search,c=n.hash,a=e||"/";return f&&f!=="?"&&(a+=f.charAt(0)==="?"?f:"?"+f),c&&c!=="#"&&(a+=c.charAt(0)==="#"?c:"#"+c),a}function $(n,e,f,c){var a;typeof n=="string"?(a=vn(n),a.state=e):(a=J({},n),a.pathname===void 0&&(a.pathname=""),a.search?a.search.charAt(0)!=="?"&&(a.search="?"+a.search):a.search="",a.hash?a.hash.charAt(0)!=="#"&&(a.hash="#"+a.hash):a.hash="",e!==void 0&&a.state===void 0&&(a.state=e));try{a.pathname=decodeURI(a.pathname)}catch(p){throw p instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):p}return f&&(a.key=f),c?a.pathname?a.pathname.charAt(0)!=="/"&&(a.pathname=dn(a.pathname,c.pathname)):a.pathname=c.pathname:a.pathname||(a.pathname="/"),a}function X(){var n=null;function e(m){return n=m,function(){n===m&&(n=null)}}function f(m,l,v,h){if(n!=null){var T=typeof n=="function"?n(m,l):n;typeof T=="string"?typeof v=="function"?v(T,h):h(!0):h(T!==!1)}else h(!0)}var c=[];function a(m){var l=!0;function v(){l&&m.apply(void 0,arguments)}return c.push(v),function(){l=!1,c=c.filter(function(h){return h!==v})}}function p(){for(var m=arguments.length,l=new Array(m),v=0;v<m;v++)l[v]=arguments[v];c.forEach(function(h){return h.apply(void 0,l)})}return{setPrompt:e,confirmTransitionTo:f,appendListener:a,notifyListeners:p}}var fn=!!(typeof window<"u"&&window.document&&window.document.createElement);function hn(n,e){e(window.confirm(n))}function gn(){var n=window.navigator.userAgent;return(n.indexOf("Android 2.")!==-1||n.indexOf("Android 4.0")!==-1)&&n.indexOf("Mobile Safari")!==-1&&n.indexOf("Chrome")===-1&&n.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function pn(){return window.navigator.userAgent.indexOf("Trident")===-1}function mn(){return window.navigator.userAgent.indexOf("Firefox")===-1}function wn(n){return n.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var nn="popstate",en="hashchange";function tn(){try{return window.history.state||{}}catch(n){return{}}}function On(n){n===void 0&&(n={}),fn||on(!1);var e=window.history,f=gn(),c=!pn(),a=n,p=a.forceRefresh,m=p===void 0?!1:p,l=a.getUserConfirmation,v=l===void 0?hn:l,h=a.keyLength,T=h===void 0?6:h,I=n.basename?cn(z(n.basename)):"";function x(i){var t=i||{},o=t.key,r=t.state,d=window.location,w=d.pathname,H=d.search,U=d.hash,A=w+H+U;return I&&(A=sn(A,I)),$(A,r,o)}function b(){return Math.random().toString(36).substr(2,T)}var L=X();function S(i){J(E,i),E.length=e.length,L.notifyListeners(E.location,E.action)}function q(i){wn(i)||K(x(i.state))}function _(){K(x(tn()))}var R=!1;function K(i){if(R)R=!1,S();else{var t="POP";L.confirmTransitionTo(i,t,v,function(o){o?S({action:t,location:i}):N(i)})}}function N(i){var t=E.location,o=C.indexOf(t.key);o===-1&&(o=0);var r=C.indexOf(i.key);r===-1&&(r=0);var d=o-r;d&&(R=!0,P(d))}var F=x(tn()),C=[F.key];function s(i){return I+M(i)}function u(i,t){var o="PUSH",r=$(i,t,b(),E.location);L.confirmTransitionTo(r,o,v,function(d){if(d){var w=s(r),H=r.key,U=r.state;if(f)if(e.pushState({key:H,state:U},null,w),m)window.location.href=w;else{var A=C.indexOf(E.location.key),G=C.slice(0,A+1);G.push(r.key),C=G,S({action:o,location:r})}else window.location.href=w}})}function k(i,t){var o="REPLACE",r=$(i,t,b(),E.location);L.confirmTransitionTo(r,o,v,function(d){if(d){var w=s(r),H=r.key,U=r.state;if(f)if(e.replaceState({key:H,state:U},null,w),m)window.location.replace(w);else{var A=C.indexOf(E.location.key);A!==-1&&(C[A]=r.key),S({action:o,location:r})}else window.location.replace(w)}})}function P(i){e.go(i)}function g(){P(-1)}function B(){P(1)}var D=0;function O(i){D+=i,D===1&&i===1?(window.addEventListener(nn,q),c&&window.addEventListener(en,_)):D===0&&(window.removeEventListener(nn,q),c&&window.removeEventListener(en,_))}var y=!1;function W(i){i===void 0&&(i=!1);var t=L.setPrompt(i);return y||(O(1),y=!0),function(){return y&&(y=!1,O(-1)),t()}}function Q(i){var t=L.appendListener(i);return O(1),function(){O(-1),t()}}var E={length:e.length,action:"POP",location:F,createHref:s,push:u,replace:k,go:P,goBack:g,goForward:B,block:W,listen:Q};return E}var an="hashchange",Pn={hashbang:{encodePath:function(e){return e.charAt(0)==="!"?e:"!/"+Z(e)},decodePath:function(e){return e.charAt(0)==="!"?e.substr(1):e}},noslash:{encodePath:Z,decodePath:z},slash:{encodePath:z,decodePath:z}};function un(n){var e=n.indexOf("#");return e===-1?n:n.slice(0,e)}function j(){var n=window.location.href,e=n.indexOf("#");return e===-1?"":n.substring(e+1)}function yn(n){window.location.hash=n}function V(n){window.location.replace(un(window.location.href)+"#"+n)}function Hn(n){n===void 0&&(n={}),fn||on(!1);var e=window.history;mn();var f=n,c=f.getUserConfirmation,a=c===void 0?hn:c,p=f.hashType,m=p===void 0?"slash":p,l=n.basename?cn(z(n.basename)):"",v=Pn[m],h=v.encodePath,T=v.decodePath;function I(){var t=T(j());return l&&(t=sn(t,l)),$(t)}var x=X();function b(t){J(i,t),i.length=e.length,x.notifyListeners(i.location,i.action)}var L=!1,S=null;function q(t,o){return t.pathname===o.pathname&&t.search===o.search&&t.hash===o.hash}function _(){var t=j(),o=h(t);if(t!==o)V(o);else{var r=I(),d=i.location;if(!L&&q(d,r)||S===M(r))return;S=null,R(r)}}function R(t){if(L)L=!1,b();else{var o="POP";x.confirmTransitionTo(t,o,a,function(r){r?b({action:o,location:t}):K(t)})}}function K(t){var o=i.location,r=s.lastIndexOf(M(o));r===-1&&(r=0);var d=s.lastIndexOf(M(t));d===-1&&(d=0);var w=r-d;w&&(L=!0,g(w))}var N=j(),F=h(N);N!==F&&V(F);var C=I(),s=[M(C)];function u(t){var o=document.querySelector("base"),r="";return o&&o.getAttribute("href")&&(r=un(window.location.href)),r+"#"+h(l+M(t))}function k(t,o){var r="PUSH",d=$(t,void 0,void 0,i.location);x.confirmTransitionTo(d,r,a,function(w){if(w){var H=M(d),U=h(l+H),A=j()!==U;if(A){S=H,yn(U);var G=s.lastIndexOf(M(i.location)),Y=s.slice(0,G+1);Y.push(H),s=Y,b({action:r,location:d})}else b()}})}function P(t,o){var r="REPLACE",d=$(t,void 0,void 0,i.location);x.confirmTransitionTo(d,r,a,function(w){if(w){var H=M(d),U=h(l+H),A=j()!==U;A&&(S=H,V(U));var G=s.indexOf(M(i.location));G!==-1&&(s[G]=H),b({action:r,location:d})}})}function g(t){e.go(t)}function B(){g(-1)}function D(){g(1)}var O=0;function y(t){O+=t,O===1&&t===1?window.addEventListener(an,_):O===0&&window.removeEventListener(an,_)}var W=!1;function Q(t){t===void 0&&(t=!1);var o=x.setPrompt(t);return W||(y(1),W=!0),function(){return W&&(W=!1,y(-1)),o()}}function E(t){var o=x.appendListener(t);return y(1),function(){y(-1),o()}}var i={length:e.length,action:"POP",location:C,createHref:u,push:k,replace:P,go:g,goBack:B,goForward:D,block:Q,listen:E};return i}function rn(n,e,f){return Math.min(Math.max(n,e),f)}function Tn(n){n===void 0&&(n={});var e=n,f=e.getUserConfirmation,c=e.initialEntries,a=c===void 0?["/"]:c,p=e.initialIndex,m=p===void 0?0:p,l=e.keyLength,v=l===void 0?6:l,h=X();function T(u){J(s,u),s.length=s.entries.length,h.notifyListeners(s.location,s.action)}function I(){return Math.random().toString(36).substr(2,v)}var x=rn(m,0,a.length-1),b=a.map(function(u){return typeof u=="string"?$(u,void 0,I()):$(u,void 0,u.key||I())}),L=M;function S(u,k){var P="PUSH",g=$(u,k,I(),s.location);h.confirmTransitionTo(g,P,f,function(B){if(B){var D=s.index,O=D+1,y=s.entries.slice(0);y.length>O?y.splice(O,y.length-O,g):y.push(g),T({action:P,location:g,index:O,entries:y})}})}function q(u,k){var P="REPLACE",g=$(u,k,I(),s.location);h.confirmTransitionTo(g,P,f,function(B){B&&(s.entries[s.index]=g,T({action:P,location:g}))})}function _(u){var k=rn(s.index+u,0,s.entries.length-1),P="POP",g=s.entries[k];h.confirmTransitionTo(g,P,f,function(B){B?T({action:P,location:g,index:k}):T()})}function R(){_(-1)}function K(){_(1)}function N(u){var k=s.index+u;return k>=0&&k<s.entries.length}function F(u){return u===void 0&&(u=!1),h.setPrompt(u)}function C(u){return h.appendListener(u)}var s={length:b.length,action:"POP",location:b[x],index:x,entries:b,createHref:L,push:S,replace:q,go:_,goBack:R,goForward:K,canGo:N,block:F,listen:C};return s}export{Hn as a,Tn as b,On as c,$ as d,M as e};
